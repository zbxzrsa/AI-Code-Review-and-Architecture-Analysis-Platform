version: 'v2_experimental'
status: 'experimental'
model:
  name: 'bigcode/starcoder'
  type: 'ollama'
  device: 'gpu' # GPU-optimized
  path: './model'
  fallback_enabled: true
  cache_enabled: true
  max_tokens: 1024
  temperature: 0.2
analysis:
  rules:
    security:
      - 'bandit:hardcoded_passwords'
      - 'bandit:sql_injection'
      - 'bandit:insecure_deserialization'
      - 'custom:injection_detection'
    quality:
      - 'eslint:no_unused_vars'
      - 'eslint:no_console'
      - 'pylint:cyclomatic_complexity'
      - 'radon:cognitive_complexity'
    performance:
      - 'custom:performance_patterns'
      - 'radon:high_complexity'
    architecture:
      - 'custom:design_patterns'
      - 'custom:architectural_smells'
  languages:
    supported: ['python', 'javascript', 'typescript', 'java', 'cpp', 'go', 'rust']
    primary: 'python'
  focus_areas:
    - 'security'
    - 'quality'
    - 'performance'
    - 'architecture'
  features:
    - 'context_aware_analysis'
    - 'multi_file_analysis'
    - 'incremental_review'
    - 'code_generation_suggestions'
metrics:
  avg_latency: 1.2s # Target: better than v1
  accuracy: 0.88 # Target: better than v1
  throughput: 80 # reviews per minute
  error_rate: 0.03
  cost_per_review: '$0.000' # Free local model
  uptime: 0.995
  model_size: '7B'
constraints:
  max_memory: '8GB'
  timeout: 45
  max_file_size: '5MB'
  max_concurrent_requests: 5
  gpu_required: true
  min_gpu_memory: '4GB'
monitoring:
  prometheus_enabled: true
  log_level: 'DEBUG'
  health_check_interval: 30
  alerting:
    latency_threshold: 3.0s
    error_rate_threshold: 0.08
    accuracy_threshold: 0.85
    gpu_memory_threshold: '6GB'
experimental_features:
  enabled: true
  features:
    - 'code_completion'
    - 'refactoring_suggestions'
    - 'test_generation'
    - 'documentation_generation'
  a_b_testing:
    enabled: true
    traffic_split: 0.1 # 10% to v2
    metrics_comparison: ['latency', 'accuracy', 'user_satisfaction']
input_schema:
  code:
    type: string
    max_length: 50000
  language:
    type: string
    enum: ['python', 'javascript', 'typescript', 'java', 'cpp', 'go', 'rust']
  context:
    type: string
    description: 'Additional context for analysis (project structure, previous reviews, etc.)'
  focus_areas:
    type: array
    items:
      type: string
      enum: ['security', 'quality', 'performance', 'style', 'architecture']
output_schema:
  review:
    type: string
  issues:
    type: array
    items:
      type: object
      properties:
        type:
          type: string
          enum: ['security', 'quality', 'performance', 'style', 'architecture']
        severity:
          type: string
          enum: ['low', 'medium', 'high', 'critical']
        line:
          type: integer
        message:
          type: string
        suggestion:
          type: string
        confidence:
          type: number
          minimum: 0
          maximum: 1
  suggestions:
    type: array
    items:
      type: object
      properties:
        type:
          type: string
          enum: ['refactor', 'optimize', 'secure', 'document']
        description:
          type: string
        code_snippet:
          type: string
  confidence:
    type: number
    minimum: 0
    maximum: 1
  tokens_used:
    type: integer
    minimum: 0
  processing_time:
    type: number
    unit: 'seconds'
  model_info:
    type: object
    properties:
      name:
        type: string
      version:
        type: string
      parameters:
        type: integer
